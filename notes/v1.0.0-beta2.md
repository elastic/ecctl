# Changelog

Release binaries can be downloaded with the following links:

<https://download.elastic.co/downloads/ecctl/1.0.0-beta2/ecctl_1.0.0-beta2_darwin_amd64.tar.gz>
<https://download.elastic.co/downloads/ecctl/1.0.0-beta2/ecctl_1.0.0-beta2_linux_32-bit.deb>
<https://download.elastic.co/downloads/ecctl/1.0.0-beta2/ecctl_1.0.0-beta2_linux_32-bit.rpm>
<https://download.elastic.co/downloads/ecctl/1.0.0-beta2/ecctl_1.0.0-beta2_linux_386.tar.gz>
<https://download.elastic.co/downloads/ecctl/1.0.0-beta2/ecctl_1.0.0-beta2_linux_64-bit.deb>
<https://download.elastic.co/downloads/ecctl/1.0.0-beta2/ecctl_1.0.0-beta2_linux_64-bit.rpm>
<https://download.elastic.co/downloads/ecctl/1.0.0-beta2/ecctl_1.0.0-beta2_linux_amd64.tar.gz>

Checksums can be found [here](https://download.elastic.co/downloads/ecctl/1.0.0-beta2/ecctl_1.0.0-beta2_checksums.txt)


## Breaking changes

* **Renamed --type flag to --kind**. We renamed the `--type` flag to `--kind` on the {p} where applicable to keep the CLI flag names closer to what the API declares. Commands affected by this change are:

  * `deployment show`
  * `deployment plan cancel`
  * `deployment resource delete`
  * `deployment resource restore`
  * `deployment resource shutdown`
  * `deployment resource start-maintenance`
  * `deployment resource start`
  * `deployment resource stop-maintenance.go`
  * `deployment resource stop`
  * `deployment resource upgrade`

## Notable changes

* **--kind flag autocompletion**. Commands which have a `--kind` flag, now have shell autocompletion for the allowed kinds for the command.

* **Added an `--all` flag for all `resync` commands**. Allowing to trigger a resync not only for a specific id but for all of the indexed records.

* **Changes the default polling period for the `platform allocator vacate` operation**. Defaults to 10s instead of 1s. This change should reduce the computational impact that the `allocator vacate` operation has in both the machine running the command and the target environment where the vacate is being run.

* **Adds --max-poll-retries and --poll-frequency flags to `platform allocator vacate`**. Allowing users to configure these settings if needed.

* **Adds a `--plan-history` flag to `deployment show`**. To be able to obtain the deployment plan history from a specific deployment.

### New Commands

* Deployment appsearch commands:

  * `ecctl deployment appsearch create`:: Creates an AppSearch instance.
  * `ecctl deployment appsearch delete`:: Deletes a previously shut down AppSearch deployment resource.
  * `ecctl deployment appsearch show`:: Shows the specified AppSearch deployment.
  * `ecctl deployment appsearch shutdown`:: Shuts down an AppSearch deployment.
  * `ecctl deployment appsearch upgrade`:: Upgrades an AppSearch deployment to the Elasticsearch deployment version.

* We also added a few subcommands to the platform runner command:

  * `ecctl platform runner list`::  Lists the existing platform runners
  * `ecctl platform runner resync`:: Resynchronizes the search index and cache for the selected runner or all
  * `ecctl platform runner search`:: Performs advanced runner searching
  * `ecctl platform runner show`:: Shows information about the specified runner

### Bug fixes

* `ecctl init` returned a cryptic error when the API Key could not be verified. It now returns a human-readable error which the user can act on.
* `--kind` flag was incorrectly marked as optional in the `deployment plan cancel` command.

### Detailed changes
<!-- AUTOGENERATED COMMIT LIST -->

* d15a85f github actions: Update checkout action to v2 (#210)
* d38d2f3 docs: Ammend Readme.md to clarify ECE only for now (#209)
* 78561f6 misc: Replace all references from cluster type to resource kind (#208)
* 5c8f2d9 init: Rever to ECE only workflow with bool toggle (#207)
* 378c362 cmd: Handle case when deployment template does not include kibana (#206)
* 7a67954 cmd: Handle case when deployment template does not include resource (#205)
* 0df4211 deps: Bump golangci-lint to v1.23.8 (#202)
* 3226b4f build(deps): bump github.com/go-openapi/strfmt from 0.19.4 to 0.19.5 (#203)
* 197c894 build(deps): bump github.com/go-openapi/runtime from 0.19.11 to 0.19.12 (#204)
* 2eeebc0 vendor: Update elastic/cloud-sdk-go to 8877c73 (#201)
* f98d103 Revert "Add release notes stub for 1.0.0-beta2 (#195)" (#200)
* 1597636 release: Change GitHub token for Tap modifications (#199)
* 63f0249 deployment: Add --plan-history flag to show cmd (#198)
* a9212ae Add release notes stub for 1.0.0-beta2 (#195)
* 8ba3d21 init: Provide alternative API validation call (#197)
* 0352d8e cmd: --region flag is not hidden anymore (#194)
* 6518877 docs: change to specify that ecctl is no longer ECE specific (#190)
* 167b041 build(deps): bump github.com/spf13/cobra from 0.0.5 to 0.0.6 (#193)
* b7ae0d6 cmd: new runner search (#192)
* f12b3f2 cmd: new appsearch upgrade <deployment id> (#191)
* f1f88c4 cmd: init now only allows API key auth for ESS users (#189)
* 1dbdd0b cmd: init gives you a choice to select default region when ESS is selected (#180)
* edeabee cmd: new appsearch shutdown and delete commands (#188)
* a721a14 Remove extra v in help file (#185)
* 569ec3d cmd: new appsearch create --id <deployment id> (#187)
* 6f3bc2c cmd: new appsearch show <deployment id>  (#186)
* bdb5e3d cmd: mark --type flag as required for plan cancel (#184)
* a88c221 cmd: new runner resync <runner id>|--all command (#181)
* 2fda990 cmd: improve UX by defining which commands are only available in ECE (#179)
* c2c994e docs: update documentation and fix small grammar mistake (#178)
* b2c7f1a cmd: improve UX by defining which commands are admin specific (#174)
* d9c72c6 cmd: init ask for type of infrastructure and default to ESS config setup (#173)
* 24fee93 makefile: update deps target to use cache (#177)
* 3ed3dc1 allocator: Vacate now moves AppSearch instances (#176)
* a5e41f7 cmd: add runner show <runner id> command (#172)
* cfd6a03 cmd: improve help wording for ECE specific commands (#169)
* 411fb1d imports: update sdk to v1.0.0-beta1 (#167)
* 6d73aeb build(deps): bump github.com/go-openapi/runtime from 0.19.10 to 0.19.11 (#158)
* 7765b1f Updating ecctl init sample command to run after init (#163)
* d94ecfe build: Add Go module cache for GitHub actions (#164)
* 2e392d1 cmd: add runner list command (#156)
* 3566c0d imports: update cloud-sdk-go to v1.0.0-bc14 (#155)
* a471e32 release: Remove v prefix from binaries and path (#152)
* fb724ec Change allocator vacate default polling settings (#151)
* 58e8c7d build(deps): bump github.com/go-openapi/runtime from 0.19.9 to 0.19.10 (#153)
* 746af52 go.mod: Update cloud-sdk-go to v1.0.0-bc12 (#147)
* 4c8f1d9 deployment: Fix empty region bug when specified (#146)
* 1e897ee build(deps): bump github.com/spf13/viper from 1.6.1 to 1.6.2 (#145)
* f35d4a8 Point ot the latest cloud-sdk-go version (#144)
* 74655e8 Update cloud-sdk-go to v1.0.0-beta1 (#143)
* 9f4cf46 build(deps): bump github.com/pkg/errors from 0.9.0 to 0.9.1 (#142)
* 327bd4d Fix goreleaser gh actions workflow (#141)
* f5d9c42 misc: adds a  command to the goreleaser.yml (#139)
* 6f29516 release: Automate release in GitHub action (#137)
* 7665aee build(deps): bump github.com/pkg/errors from 0.8.1 to 0.9.0 (#138)
* 9b314e9 util: Change default tracking poll interval (#135)
* 5717785 platform/repository: Fix list format (#136)
* 89a0097 Update the v1.0.0-beta1 release notes with information from Marc's changelog (#134)
* e09ee41 Updated instructions to use elastic/tap (#133)
* 58138bd cmd: add platform constructor resync command and --all flag (#131)
* 6372103 cmd: Add deployment resync and --all flag (#130)
* afbf5f3 cmd: add --all flag to apm resync command (#125)
* 3fe4656 cmd: add --all flag to kibana resync command (#124)
* 3e2c7d1 Add beta1 release notes (#123)
* 35c4f2b Regenerate command reference topics in Asciidoc for v1.0.0-beta1 (#128)
* 13bff46 Update usage examples (#126)
* f6c1783 build(deps): bump github.com/spf13/pflag from 1.0.3 to 1.0.5 (#127)
* 903c6bc deployment: Add --type flag autocompletion (#122)
* 90a52dd cmd: Add allocator show allocated instance details (#120)
* cf22c32 cmd: Add --skip-tracking flag to allocator vacate (#119)
* 4eeb7a2 release: v1.0.0-beta1 release fixes (#117)
* 36d40be cmd: Fix deployment notes (#114)
* 772b255 deployments: Change refID defaults to use 'main-' prefix (#118)
* f363be6 cmd: Fix deployment create typo (#115)
* 510e829 cmd: Use force flag with instance override (#113)
